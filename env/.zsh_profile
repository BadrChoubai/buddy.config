export XDG_CONFIG_HOME=$HOME/.config
export VIM="nvim"

export GOPATH=$HOME/.local/go
export GOBIN=$HOME/.local/bin
export GIT_EDITOR=$VIM


appendPath() {
    if [[ "$PATH" != *"$1"* ]]; then
        export PATH=$PATH:$1
    fi
}

prependPath() {
    if [[ "$PATH" != *"$1"* ]]; then
        export PATH=$1:$PATH
    fi
}

dotenv() {
    local file_name="${1:-.env}"

    if [[ -f "$file_name" ]]; then
        set -o allexport
        source "$file_name"
        set +o allexport
    else
        echo "dotenv: file '$file_name' not found." >&2
        return 1
    fi
}


alias vim="$VIM"
alias k="kubectl"
alias k8s="microk8s"

_lt() {
    local treeignore=""

        # If a .gitignore file exists, add its entries
    if [ -f .gitignore ]; then
        # Convert .gitignore entries to a pattern for tree -I
        local gitignore_pattern
        gitignore_pattern=$(grep -v '^\s*$\|^\s*#' .gitignore | tr '\n' '|' | sed 's/|$//')
        if [ -n "$gitignore_pattern" ]; then
            treeignore="$treeignore|$gitignore_pattern"
        fi
    fi


    # Remove leading | if it exists
    treeignore="${treeignore#|}"

    tree -L 1 -I "$treeignore" "$@"
}

alias lt="_lt"

appendPath /usr/local/go/bin
appendPath $GOBIN
appendPath $HOME/.dotnet
prependPath $HOME/.local/npm/bin

export NVM_DIR="$HOME/.config/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
